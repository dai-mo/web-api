@()
<div class="fill">
    <p-tabView class="fill" (onChange)="selectActiveTab($event.index)">
        @*Workaround for https://github.com/primefaces/primeng/issues/2000*@
        <p-tabPanel class="fill" *ngIf="uiStateStore.store.visTabs.length === 0"
        header="..."
        selected="true">
            Choose a visualisation for selected processor.
        </p-tabPanel>
        @*FIXME: Using ngSwitch for map results incorrect
                rendering of the map, so we render it separately*@
        <p-tabPanel class="fill"
        *ngIf="this.uiStateStore.mapVisTab | async as tabz"
        [header]="tabz.visType"
        [selected]="tabz.active">
            <div class="flex-panel flex-panel-parent">
                <map
                class="flex-panel overflow"
                [reload]= "uiStateStore.provenances | async">
                </map>
            </div>
        </p-tabPanel>

        <p-tabPanel class="fill"
        *ngFor="let tabz of uiStateStore.visTabsWoMap | async"
        [header]="tabz.visType"
        [selected]="tabz.active">
            <div class="flex-panel flex-panel-parent" [ngSwitch]="tabz.visType">
                <chart *ngSwitchCase="uiId.VIS_CHART"
                class="flex-panel overflow"
                [reload]= "uiStateStore.provenances | async">
                </chart>

            </div>
        </p-tabPanel>
    </p-tabView>
</div>